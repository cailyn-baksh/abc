<!DOCTYPE html>
<html>
	<head>
		<title>IR Instruction Listing | ABCVM Docs</title>

		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<aside>
			<div>
				<iframe src="sidebar.html"></iframe>
			</div>
		</aside>
		<main>
			<h1>Instructions</h1>

			<hr />
			<h2 id="jmp"><code>jmp</code>: Jump</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x0</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Unused</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Target</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Unchanged</td>
					</tr>
				</tbody>
			</table>
			<p>
				Loads a value into the program counter. The <code>jmp</code>
				instruction does not use the Op1 field. Jump instructions
				always have a <a href="ir.html#cond-codes">condition code</a>
				immediately following the instruction byte.
			</p>
			<p>
				<code>jmp</code> is designed so that it can be used to encode
				a <code>nop</code> pseudo-instruction as two null bytes.
			</p>

			<hr />
			<h2 id="add"><code>add</code>: Addition</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x1</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Augend</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Addend</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Modified</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 + Op2</p>
			<p>
				Adds Op2 to Op1 and updates Op1. This instruction expects an
				operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="sub"><code>sub</code>: Subtraction</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x2</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Minuend</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Subtrahend</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Modified</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 - Op2</p>
			<p>
				Subtracts Op2 from Op1 and updates Op1. This instruction
				expects an operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="mul"><code>mul</code>: Multiplication</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x3</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Multiplicand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Multiplier</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Modified</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &times; Op2</p>
			<p>
				Multiplies Op1 by Op2 and updates Op1. This instruction expects
				an operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="div"><code>div</code>: Division</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x4</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Dividend</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Divisor</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Division</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &div; Op2</p>
			<p>
				Divides Op1 by Op2 and updates Op1. This instruction expects an
				operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="cmp"><code>cmp</code>: Comparison</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x5</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Left Comparand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Right Comparand</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Modified</td>
					</tr>
				</tbody>
			</table>
			<p>
				Compares Op1 to Op2 by subtraction. Op2 is subtracted from Op1,
				and the resulting value is discarded. This instruction expects
				an operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="tst"><code>tst</code>: Testing</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x6</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Left Comparand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Right Comparand</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p>
				Compares Op1 to Op2 by bitwise AND. The values are ANDed
				together, and the resulting value is discarded. This
				instruction expects an operand size specifier before the
				operands.
			</p>

			<hr />
			<h2 id="and"><code>and</code>: Bitwise AND</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x7</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Left Operand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Right Operand</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &and; Op2</p>
			<p>
				Performs bitwise AND on Op1 and Op2 and updates Op1. This
				instruction expects an operand size specifier before the
				operands.
			</p>

			<hr />
			<h2 id="or"><code>or</code>: Bitwise OR</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x8</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Left Operand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Right Operand</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &or; Op2</p>
			<p>
				Performs bitwise OR on Op1 and Op2 and updates Op1. This
				instruction expects an operand size specifier before the
				operands.
			</p>

			<hr />
			<h2 id="xor"><code>xor</code>: Bitwise XOR</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0x9</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Left Operand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Right Operand</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &oplus; Op2</p>
			<p>
				Performs bitwise XOR on Op1 and Op2 and updates Op1. This
				instruction expects an operand size specifier before the
				operands.
			</p>

			<hr />
			<h2 id="cpl"><code>cpl</code>: One's Complement</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0xA</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Operand</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Unused</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Undefined</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = ~Op1</p>
			<p>
				Inverts the bits of Op1 and updates Op1. This instruction
				expects an operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="lsl"><code>lsl</code>: Logical Shift Left</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0xB</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Value</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Shift Amount</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>MSB</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Undefined</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &lt;&lt; Op2</p>
			<p>
				Shifts the bits of Op1 left by Op2, shifting in zeroes, and
				updates Op1. This instruction expects an operand size specifier
				before the operands.
			</p>

			<hr />
			<h2 id="lsr"><code>lsr</code>: Logical Shift Right</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0xC</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Value</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Shift Amount</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>LSB</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Unchanged</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &gt;&gt; Op2</p>
			<p>
				Shifts the bits of Op1 right by Op2, shifting in zeroes, and
				updates Op1. This instruction expects an operand size specifier
				before the operands.
			</p>

			<hr />
			<h2 id="lsr"><code>asr</code>: Arithmetic Shift Right</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0xD</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination/Value</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Shift Amount</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Modified</td>
					</tr>
					<tr>
						<th>C</th>
						<td>LSB</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Unchanged</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &gt;&gt; Op2</p>
			<p>
				Shifts the bits of Op1 right by Op2, shifting in a copy of the
				most significant bit, and updates Op1. This instruction expects
				an operand size specifier before the operands.
			</p>

			<hr />
			<h2 id="mov"><code>mov</code>: Move</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0xE</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Destination</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Value</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Unchanged</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op2</p>
			<p>
				Loads Op2 into Op1. This instruction expects an operand size
				specifier before the operands.
			</p>

			<hr />
			<h2 id="call"><code>call</code>: Call</h2>
			<table class="grid">
				<tbody>
					<tr>
						<th colspan="2">Opcode</th>
						<td><code>0xF</code></td>
					</tr>
					<tr>
						<th colspan="2">Op1</th>
						<td>Unused</td>
					</tr>
					<tr>
						<th colspan="2">Op2</th>
						<td>Target</td>
					</tr>
					<tr>
						<th rowspan="4">Flags</th>
						<th>Z</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>N</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>C</th>
						<td>Unchanged</td>
					</tr>
					<tr>
						<th>V</th>
						<td>Unchanged</td>
					</tr>
				</tbody>
			</table>
			<p class="no-indent">Op1 = Op1 &amp; Op2</p>
			<p>
				Loads a value into the program counter and saves the old value
				in the Link Register.
			</p>

			<h1>Pseudo-instructions</h1>

			<h2 id="nop"><code>nop</code></h2>
			<p>
				<code>nop</code> can be implemented through one of several
				instructions with no effect. The suggested one is a jump to
				R0 with the "not always" condition code. This is equivalent
				to two null bytes.
			</p>

			<h2 id="ret"><code>ret</code></h2>
			<p>
				Returning can be implemented by jumping to the link register.
				This means that returns can have a condition code.
			</p>
		</main>
	</body>
</html>